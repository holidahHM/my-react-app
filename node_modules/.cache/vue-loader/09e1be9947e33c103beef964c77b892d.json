{"remainingRequest":"/home/mulama/Desktop/Management/mgt2/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mulama/Desktop/Management/mgt2/src/views/Pages/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/mulama/Desktop/Management/mgt2/src/views/Pages/Login.vue","mtime":1628066451461},{"path":"/home/mulama/Desktop/Management/mgt2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mulama/Desktop/Management/mgt2/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/mulama/Desktop/Management/mgt2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mulama/Desktop/Management/mgt2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBlcnJvckNvZGVzIGZyb20gJy4uLy4uL3NlcnZpY2UvZXJyb3JDb2RlcycKaW1wb3J0IHsgbG9naW5Vc2VyIH0gZnJvbSAnLi4vLi4vYXBpL3VzZXJzLmFwaScKZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgICAgICAgICBwYXNzd29yZDogJycsCiAgICAgICAgICAgICAgcmVtZW1iZXJNZTogZmFsc2UsCiAgICAgICAgICAgICAgZXJyb3I6ICcnLAogICAgICAgICAgICAgIHN1Y2Nlc3M6ICcnLAogICAgICAgICAgICB9LAogICAgICAgIH07CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGFzeW5jIGxvZ2luTG9naWMoKSB7CiAgICAgICAgICB0aGlzLm1vZGVsLmVycm9yID0gJyc7CiAgICAgICAgICB0aGlzLm1vZGVsLnN1Y2Nlc3MgPSAnJzsKICAgICAgICAgIGxldCByZXNwb25zZSA9ICcnOwogICAgICAgICAgIHRyeXsKICAgICAgICAgICAgIHRoaXMuJGxvYWRpbmcuc2hvdyh7ZGVsYXk6MH0pOwogICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IGxvZ2luVXNlcih0aGlzLm1vZGVsLnVzZXJuYW1lLCB0aGlzLm1vZGVsLnBhc3N3b3JkKTsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICB0aGlzLm1vZGVsLnN1Y2Nlc3MgPSByZXNwb25zZS5kYXRhLm1lc3NhZ2U7CiAgICAgICAgICAgfWNhdGNoKGUpewogICAgICAgICAgICAgdGhpcy4kbG9hZGluZy5oaWRlKCk7CiAgICAgICAgICAgICBsZXQgcmVzcG1lc3MgPSBlcnJvckNvZGVzLmdldEVycm9yTWVzc2FnZUZyb21Db2RlKGUucmVzcG9uc2Uuc3RhdHVzKTsKICAgICAgICAgICAgIHRoaXMubW9kZWwuZXJyb3IgPSByZXNwbWVzczsKICAgICAgICAgICAgIHRocm93IHJlc3BtZXNzOwogICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy4kbG9hZGluZy5oaWRlKCk7CiAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKXsKICAgICAgICAgICAgIGxldCB0b2tlbkRhdGEgPSB7CiAgICAgICAgICAgICAgICB1c2VyaWQ6IHJlc3BvbnNlLmRhdGEuZGF0YS51c2VyX2lkLAogICAgICAgICAgICAgICAgZnVsbG5hbWU6IHJlc3BvbnNlLmRhdGEuZGF0YS51c2VyX2Z1bGxfbmFtZXMsCiAgICAgICAgICAgICAgICB1c2VybmFtZTogcmVzcG9uc2UuZGF0YS5kYXRhLnVzZXJuYW1lLAogICAgICAgICAgICAgICAgb2Fmc2xtb2R1bGVzOnJlc3BvbnNlLmRhdGEuZGF0YS5vYWZzbF9tb2R1bGVzLAogICAgICAgICAgICB9OwogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlckRhdGEnLCBKU09OLnN0cmluZ2lmeSh0b2tlbkRhdGEpKTsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9ob21lcGFnZScpOwogICAgICAgICAgIH0gICAKICAgICAgICB9LAogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlckRhdGEnKSAhPT0gbnVsbCkgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvaG9tZXBhZ2UnKTsKICAgICAgfQogICAgICBlbHNlewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbG9naW4nKTsKICAgICAgfQogICAgfSwKCn07Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Login.vue","sourceRoot":"src/views/Pages","sourcesContent":["<template>\n  <div>\n    <!-- Header -->\n    <div class=\"header bg-gradient-success py-7 py-lg-8 pt-lg-9\">\n      <b-container>\n        <div class=\"header-body text-center mb-7\">\n          <b-row class=\"justify-content-center\">\n            <b-col xl=\"5\" lg=\"6\" md=\"8\" class=\"px-5\">\n              <h1 class=\"text-white\">Welcome!</h1>\n              <p class=\"text-lead text-white\">Welcome at Octagon Africa</p>\n            </b-col>\n          </b-row>\n        </div>\n      </b-container>\n      <div class=\"separator separator-bottom separator-skew zindex-100\">\n        <svg x=\"0\" y=\"0\" viewBox=\"0 0 2560 100\" preserveAspectRatio=\"none\" version=\"1.1\"\n             xmlns=\"http://www.w3.org/2000/svg\">\n          <polygon class=\"fill-default\" points=\"2560 0 2560 100 0 100\"></polygon>\n        </svg>\n      </div>\n    </div>\n    <!-- Page content -->\n    <b-container class=\"mt--8 pb-5\">\n      <b-row class=\"justify-content-center\">\n        <b-col lg=\"5\" md=\"7\">\n          <b-card no-body class=\"bg-secondary border-0 mb-0\">\n             <b-card-header class=\"bg-transparent pb-5\">\n            \n              <div class=\"text-center\">\n                <a href=\"#\" class=\"btn btn-neutral btn-icon mr-4\">\n                  <img src=\"img/brand/Octagon_logo.png\">\n                  \n                </a>\n                \n              </div>\n            </b-card-header>\n            <b-card-body class=\"px-lg-5 py-lg-5\">\n             <div class=\"alert alert-danger\" v-if=\"model.error\">\n                {{ model.error }}\n              </div>\n              <div class=\"alert alert-success\" v-if=\"model.success\">\n                {{ model.success }}\n              </div>\n              <validation-observer v-slot=\"{handleSubmit}\" ref=\"formValidator\">\n                <b-form role=\"form\" action=\"\"  method = \"get\" @submit.prevent=\"handleSubmit(onSubmit)\" >\n                  <base-input alternative\n                              class=\"mb-3\"\n                              name=\"Username\"\n                              :rules=\"{required: true, }\"\n                              prepend-icon=\"ni ni-circle-08\"\n                              placeholder=\"Username\"\n                              v-model=\"model.username\">\n                  </base-input>\n\n                  <base-input alternative\n                              class=\"mb-3\"\n                              name=\"Password\"\n                              :rules=\"{required: true, min: 6}\"\n                              prepend-icon=\"ni ni-lock-circle-open\"\n                              type=\"password\"\n                              placeholder=\"Password\"\n                              v-model=\"model.password\">\n                  </base-input>\n\n                  <b-form-checkbox v-model=\"model.rememberMe\">Remember me</b-form-checkbox>\n                  <div class=\"text-center\">\n                    <base-button type=\"submit\" @click=\"loginLogic\" class=\"btn btn-primary\">Sign in</base-button>\n                    <router-link to=\"/otp\" class=\"text-light\"><small>OTP</small></router-link>\n                  </div>\n                </b-form>\n              </validation-observer>\n            </b-card-body>\n          </b-card>\n          <b-row class=\"mt-3\">\n            <b-col cols=\"6\">\n              <router-link to=\"/dashboard\" class=\"text-light\"><small>Forgot password?</small></router-link>\n            </b-col>\n            <b-col cols=\"6\" class=\"text-right\">\n              <router-link to=\"/register\" class=\"text-light\"><small>Create new account</small></router-link>\n            </b-col>\n          </b-row>\n        </b-col>\n      </b-row>\n    </b-container>\n  </div>\n</template>\n\n<script>\nimport errorCodes from '../../service/errorCodes'\nimport { loginUser } from '../../api/users.api'\nexport default {\n    data() {\n        return {\n            model: {\n              username: '',\n              password: '',\n              rememberMe: false,\n              error: '',\n              success: '',\n            },\n        };\n    },\n    methods: {\n        async loginLogic() {\n          this.model.error = '';\n          this.model.success = '';\n          let response = '';\n           try{\n             this.$loading.show({delay:0});\n            response = await loginUser(this.model.username, this.model.password);\n            console.log(response);\n            this.model.success = response.data.message;\n           }catch(e){\n             this.$loading.hide();\n             let respmess = errorCodes.getErrorMessageFromCode(e.response.status);\n             this.model.error = respmess;\n             throw respmess;\n           }\n            this.$loading.hide();\n           if (response.status === 200){\n             let tokenData = {\n                userid: response.data.data.user_id,\n                fullname: response.data.data.user_full_names,\n                username: response.data.data.username,\n                oafslmodules:response.data.data.oafsl_modules,\n            };\n            localStorage.setItem('userData', JSON.stringify(tokenData));\n            this.$router.push('/homepage');\n           }   \n        },\n    },\n    mounted() {\n      if (localStorage.getItem('userData') !== null) {\n        this.$router.push('/homepage');\n      }\n      else{\n        this.$router.push('/login');\n      }\n    },\n\n};\n</script>\n\n"]}]}